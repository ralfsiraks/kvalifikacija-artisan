<div class="flex fixed z-20 justify-center items-center w-screen h-screen fade-in" #modalContainer>
	<div class="fixed z-20 bg-dark bg-opacity-60 w-screen h-screen" (click)="onCloseModal(modalContainer)"></div>
	<div
		class="z-30 justify-center items-center flex-col bg-white w-1/3 scale-up text-dark rounded-2xl p-10 transition-all duration-1000"
	>
		<div class="flex w-full items-center flex-col mb-2">
			<div class="w-full flex justify-end">
				<span
					class="material-symbols-outlined black-text-shadow duration-200 text-dark text-5xl -mt-5 -mr-5"
					(click)="onCloseModal(modalContainer)"
				>
					close
				</span>
			</div>
			<h2 class="font-bold mb-3">Change Password</h2>
			<form
				(ngSubmit)="onPasswordSubmit()"
				[formGroup]="passwordForm"
				class="w-full flex justify-center items-center flex-col text-2xl gap-4 fade-in"
			>
				<div
					[ngClass]="{
						'border-red-500':
							passwordForm.get('oldPassword').invalid &&
							(passwordForm.get('oldPassword').dirty || passwordForm.get('oldPassword').touched)
					}"
					name="input"
					class="flex justify-start items-center gap-3 border-2 border-dark p-2 rounded-xl w-full transition-all duration-300"
				>
					<div class="w-1/10 flex justify-center items-center">
						<span
							[ngClass]="{
								'text-red-500':
									passwordForm.get('oldPassword').invalid &&
									(passwordForm.get('oldPassword').dirty || passwordForm.get('oldPassword').touched)
							}"
							class="material-symbols-outlined cursor-default text-3xl transition-all duration-300"
						>
							lock
						</span>
					</div>

					<input
						formControlName="oldPassword"
						type="password"
						placeholder="Current Password"
						class="bg-transparent w-full"
					/>
				</div>
				<h6
					class="-mt-3 font-semibold text-red-500"
					*ngIf="passwordForm.get('oldPassword').invalid && passwordForm.get('oldPassword').errors['invalidPassword']"
				>
					Password must contain lower and upper case characters, numbers and be at least 8 digits!
				</h6>
				<div
					[ngClass]="{
						'border-red-500':
							passwordForm.get('newPassword').invalid &&
							(passwordForm.get('newPassword').dirty || passwordForm.get('newPassword').touched)
					}"
					name="input"
					class="flex justify-start items-center gap-3 border-2 border-dark p-2 rounded-xl w-full transition-all duration-300"
				>
					<div class="w-1/10 flex justify-center items-center">
						<span
							[ngClass]="{
								'text-red-500':
									passwordForm.get('newPassword').invalid &&
									(passwordForm.get('newPassword').dirty || passwordForm.get('newPassword').touched)
							}"
							class="material-symbols-outlined cursor-default text-3xl transition-all duration-300"
						>
							lock
						</span>
					</div>

					<input
						formControlName="newPassword"
						type="password"
						placeholder="New Password"
						class="bg-transparent w-full"
					/>
				</div>
				<h6
					class="-mt-3 font-semibold text-red-500"
					*ngIf="passwordForm.get('newPassword').invalid && passwordForm.get('newPassword').errors['invalidPassword']"
				>
					Password must contain lower and upper case characters, numbers and be at least 8 digits!
				</h6>
				<div
					[ngClass]="{
						'border-red-500':
							passwordForm.get('newPasswordAgain').invalid &&
							(passwordForm.get('newPasswordAgain').dirty || passwordForm.get('newPasswordAgain').touched)
					}"
					name="input"
					class="flex justify-start items-center gap-3 border-2 border-dark p-2 rounded-xl w-full transition-all duration-300"
				>
					<div class="w-1/10 flex justify-center items-center">
						<span
							[ngClass]="{
								'text-red-500':
									passwordForm.get('newPasswordAgain').invalid &&
									(passwordForm.get('newPasswordAgain').dirty || passwordForm.get('newPasswordAgain').touched)
							}"
							class="material-symbols-outlined cursor-default text-3xl transition-all duration-300"
						>
							lock
						</span>
					</div>

					<input
						formControlName="newPasswordAgain"
						type="password"
						placeholder="New Password Again"
						class="bg-transparent w-full"
					/>
				</div>
				<h6
					class="-mt-3 font-semibold text-red-500"
					*ngIf="
						passwordForm.get('newPasswordAgain').invalid &&
						passwordForm.get('newPasswordAgain').errors['invalidPassword']
					"
				>
					Password must contain lower and upper case characters, numbers and be at least 8 digits!
				</h6>
				<button
					[disabled]="passwordForm.invalid"
					class="border-2 border-dark rounded-lg h-5vmin p-3 w-full text-slate-800 text-2xl font-bold flex justify-center items-center group hover:bg-dark transition-colors duration-200 disabled:opacity-50"
				>
					<span class="group-hover:text-white transition-colors duration-200 select-none">Change Password</span>
				</button>
			</form>
		</div>
	</div>
</div>
